<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">
  <title>SAAQClic - Vérification mécanique</title>

  <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,700,900" rel="stylesheet">
  <link rel="stylesheet" href="../css-js/saaq-components.css">
  <script src="../css-js/user-testing-func.js"></script>
  <!-- <script type="text/javascript" src="../data/enregistre-data.json"></script> -->



  <style>
      .footer {
        position: relative;
        margin-right: 10px;
        bottom: 10px;
        width: 100%;
        border: 1px solid #007676;
      }
      .expandable-row { line-height: 125%;}
      .expandable-row .niv { font-size: 95%; }
    </style>

</head>

<body>
  <div class="bx--grid">
    <div class="bx--row">
      <div class="bx--col-md-12">
        <br />
        <br />
        <br />
        <nav class="bx--breadcrumb bx--breadcrumb--no-trailing-slash" aria-label="breadcrumb">
            <div class="bx--breadcrumb-item">
              <a href="home-vm.html" class="bx--link">Accueil</a>
            </div>
            <div class="bx--breadcrumb-item">
            </div>
        </nav>
        
        <nav role="navigation" aria-label="Interior Left Navigation" data-interior-left-nav onclick="toggleSideNav()" class="bx--interior-left-nav bx--interior-left-nav--collapseable">
          <ul role="menubar" class="left-nav-list" data-interior-left-nav-list aria-label="left nav list" aria-hidden="false">
            <li role="menuitem" tabindex="0" class="left-nav-list__item" data-interior-left-nav-item>
              <a class="left-nav-list__item-link" href="home-vm.html">
                STH commerce québec
              </a>
            </li>

            <li role="menuitem" tabindex="0" class="left-nav-list__item" data-interior-left-nav-item>
              <a class="left-nav-list__item-link" href="empty.html">
                Rôles &amp; Accès
              </a>
            </li>

            <li role="menuitem" tabindex="0" class="left-nav-list__item" data-interior-left-nav-item>
              <a class="left-nav-list__item-link" href="empty.html">
                Factures
              </a>
            </li>
              <li role="menuitem" tabindex="3" class="left-nav-list__item" data-interior-left-nav-item>
                <a class="left-nav-list__item-link" href="vm-step-1.html">
                  Certificats
                </a>
              </li>
            </ul>
            <div class="bx--interior-left-nav-collapse" data-interior-left-nav-collapse>
              <a class="bx--interior-left-nav-collapse__link" href="#" aria-label="collapse nav pane">
                <svg class="bx--interior-left-nav-collapse__arrow" width="8" height="12" viewBox="0 0 8 12" fill-rule="evenodd" data-interior-left-nav-arrow>
                  <title>Collapse nav pane</title>
                  <path d="M7.5 10.6L2.8 6l4.7-4.6L6.1 0 0 6l6.1 6z"></path>
                </svg>
              </a>
            </div>
          </nav>

        <div class="bx--grid" id="main-content">

          <!-- miniStep 1 - Raison pour remplacement -->
          <div class="bx--row">
            <div class="bx--col-xs-12">
              <br>
			  <h1>:)</h1>
                
            </div>
          </div>

        </div>
        <!-- End of div .bx--grid-->

      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
  <script src="scripts/libs/bootstrap/bootstrap.js"></script>
  <script src="../css-js/saaq-components.js"></script>
  <script>

  </script>
  <script>
      var openSideNav = false;
      toggleSideNav();
  
      function toggleSideNav() {
        //document.getElementById("mySidenav").style.width = "250px";
        if (openSideNav == true) {
          document.getElementById("main-content").style.marginLeft = "5%";
          openSideNav = false;
          console.log("NAV CLOSED");
        } else {
          document.getElementById("main-content").style.marginLeft = "17%";
          openSideNav = true;
          console.log("NAV OPENED");
        }
      }
  
    </script>



<script>
    function mySearchFunction() {
      var input, filter, table, tr, td, i;
      input = document.getElementById("search__input");
      filter = input.value.toUpperCase();
      table = document.getElementById("vm_historic_table");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[0];
        if (td) {
          if ((td.innerHTML.toUpperCase().indexOf(filter) > -1)) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }       
      }
    }
    </script>

<!-- IMPORTANT -->
    <script>
    var data_items_per_page,data_page_number_input, current_page_nb, total_item_count, range;

      var sortedDataSet;

      // Dividing the tables into page representation of the tables for display
      function prepDataSetPerPage(range_limit) {
        sortedDataSet = [];
        var index = 0;
        for (let i = 0; i < num_of_pages; i++) {
          var tempArray = [];          
          for (let j = 0; j < range_limit; j++) {
            tempArray.push(data_1[index]);
            index++;
            if (index >= total_item_count ){
              break;
            }
          }
          sortedDataSet.push(tempArray); 
        }
        console.log(sortedDataSet);
      }
      

      function populateTableData() {

        getUpdatedValues();
        prepDataSetPerPage (range);
        readPopulateTable(data_1);
        

        
      }

      function readPopulateTable(data_table) {
        var data_table_body = document.querySelector('[data-table-body]');
        var table_data_html = "";
        
        var pageIndex = current_page_nb-1
        
        for (var i = 0; i < sortedDataSet[pageIndex].length; i++) { 
          table_data_html += ("<tr><td>"+sortedDataSet[pageIndex][i].vehicule+"</td><td>"+sortedDataSet[pageIndex][i].date_creation+"</td><td>"+sortedDataSet[pageIndex][i].num_id+"</td><td>"+sortedDataSet[pageIndex][i].type_doc+"</td><td>"+sortedDataSet[pageIndex][i].statut+"</td><td>"+sortedDataSet[pageIndex][i].type_vehicule+"</td><td>"+sortedDataSet[pageIndex][i].employe+"</td><td><a href=\"#\">"+sortedDataSet[pageIndex][i].action+"</a></td></tr>");
        }

        data_table_body.innerHTML = table_data_html;
        
      }

      function getUpdatedValues() {
        data_items_per_page = document.querySelector('[data-items-per-page]');
        range = data_items_per_page.options[data_items_per_page.selectedIndex].value;
        console.log(range);

        data_page_number_input = document.querySelector('[data-page-number-input]');
        current_page_nb = data_page_number_input.options[data_page_number_input.selectedIndex].value;

        total_item_count = data_1.length;
        num_of_pages = Math.ceil(total_item_count / range);

        // ----- Right
        var total_page_count_label = document.querySelector('[data-total-pages]');
        total_page_count_label.innerHTML = num_of_pages;

        var page_number_input_html="";
          for (let index = 1; index <= num_of_pages; index++) {
            page_number_input_html += "<option class=\"bx--select-option\" value=\""+index+"\">"+index+"</option>"
          }
          data_page_number_input.innerHTML = page_number_input_html;

      }

      populateTableData();

    </script>

    <script>
      var data_set_size = data_1.length;
      var page_count_total;      
      function getTotalPageCount(table_item_count, items_per_page) {

        var num_of_pages = Math.ceil(table_item_count / items_per_page);
        
        var total_page_count_label = document.querySelector('[data-total-pages]');
        total_page_count_label.innerHTML = num_of_pages;

         var data_page_number_input = document.querySelector('[data-page-number-input]');
          var current_page = data_page_number_input.options[data_page_number_input.selectedIndex].value;
         
        var page_number_input_html="";
          for (let index = 1; index <= num_of_pages; index++) {
            page_number_input_html += "<option class=\"bx--select-option\" value=\""+index+"\">"+index+"</option>"
          }
          data_page_number_input.innerHTML = page_number_input_html;
         
         updateDataTotalItem(table_item_count);
         updateDataDisplayedItemRange(20, 40, items_per_page);
      }

      function updateTableData() {
        var data_page_number_input = document.querySelector('[data-page-number-input]');
          var current_page = data_page_number_input.options[data_page_number_input.selectedIndex].value;

          var data_items_per_page = document.querySelector('[data-items-per-page]');
        var range = data_items_per_page.options[data_items_per_page.selectedIndex].value;

        var data_displayed_page_number = document.querySelector('[data-displayed-page-number]');
        data_displayed_page_number.innerHTML = current_page;
        

          //updateDataTablePageChange(current_page, range);
        
      }


      function updateDataTablePageChange(pageNumber, range) {
        
        var data_table_body = document.querySelector('[data-table-body]');
        var table_data_html = "";
        var start = (((pageNumber-1)*range)+1);
        var end = (pageNumber*range);
        if (end >data_1.length){
          end = data_1.length
        }
        for (var i = start; i < end; i++) { 
          table_data_html += ("<tr><td>"+data_1[i].vehicule+"</td><td>"+data_1[i].date_creation+"</td><td>"+data_1[i].num_id+"</td><td>"+data_1[i].type_doc+"</td><td>"+data_1[i].statut+"</td><td>"+data_1[i].type_vehicule+"</td><td>"+data_1[i].employe+"</td><td><a href=\"#\">"+data_1[i].action+"</a></td></tr>");
        }

        data_table_body.innerHTML = table_data_html;
        
      }

      function updateDataTotalItem(param) {
        //var data_total_items = document.querySelector('[data-total-items]');
        //data_total_items.innerHTML = param;
      }
      function updateDataDisplayedItemRange(rangeStrart, rangeEnd,itemsPerPage) {
        
        // var data_items_per_page = document.querySelector('[data-items-per-page]');
        // var range = data_items_per_page.options[data_items_per_page.selectedIndex].value;

        // var data_page_number_input = document.querySelector('[data-page-number-input]');
        // var current_page = data_page_number_input.options[data_page_number_input.selectedIndex].value;
        // var data_displayed_item_range = document.querySelector('[data-displayed-item-range]');

        // data_displayed_item_range.innerHTML =(((current_page-1)*range)+1)+"-"+(current_page*range);

      }

      getTotalPageCount(data_1.length, 10.0);
    </script>

<!-- SORT TABLE -->
    <script>
      var table = document.querySelector('[data-table-v2]');
var tableContainer = document.querySelector('.bx--responsive-table-container');
var columns = document.querySelectorAll('[data-event=sort]');

function sortTable(table, col, direction) {
  // Get Table Ref for Refreshing Rows 
  var tableRef = CarbonComponents.DataTable.components.get(tableContainer);
  // Get Table Body
  var tb = table.querySelector('tbody');
  var tr = Array.from(tb.querySelectorAll('tr'));
  // Sort Rows
  tr = tr.sort(function (a, b) {
    var one = a.cells[col].textContent.trim();
    var two = b.cells[col].textContent.trim();
    if (direction === undefined || direction === 'descending') {
      return one > two;
    } else {
      return two > one;
    }
  });
  // Reappend rows
  tr.forEach(function (item) {
    tb.appendChild(item);
  });
  // Refresh stripes
  tableRef.refreshRows();
}

function clearIcons(i) {
  Array.from(columns).forEach(function (column, key) {
    if (!(i === key)) {
      delete column.dataset.active;
    }
  });
}

var prevNode = 0;
Array.from(columns).forEach(function (column, key) {
  column.addEventListener('click', function (evt) {
    if (!(key === prevNode)) {
      clearIcons(key);
      column.dataset.active = true;
      prevNode = key;
    }

    var direction = column.dataset.previousValue;
    sortTable(table, key, direction);
  });
});
    
    </script>

</body>

</html>
